{"version":3,"file":"angular-cropperjs.js.map","sources":["ng://angular-cropperjs/lib/angular-cropperjs.service.ts","ng://angular-cropperjs/lib/cropper/cropper.component.ts","ng://angular-cropperjs/lib/angular-cropperjs.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AngularCropperjsService {\n\n  constructor() { }\n}\n","import { Component, OnInit, ViewEncapsulation, ElementRef, ViewChild, Input, EventEmitter, Output } from '@angular/core';\nimport Cropper from 'cropperjs';\n\nexport interface ImageCropperSetting {\n    width: number;\n    height: number;\n}\n\nexport interface ImageCropperResult {\n    imageData: Cropper.ImageData;\n    cropData: Cropper.CropBoxData;\n    blob?: Blob;\n    dataUrl?: string;\n}\n\n@Component({\n    selector: 'angular-cropper',\n    template: `<!-- CROPPER WRAPPER -->\n<div class=\"cropper-wrapper\">\n\n    <!-- LOADING -->\n    <div class=\"loading-block\" *ngIf=\"isLoading\">\n        <div class=\"spinner\"></div>\n    </div>\n\n    <!-- LOAD ERROR -->\n    <div class=\"alert alert-warning\" *ngIf=\"loadError\">{{ loadImageErrorText }}</div>\n\n    <!-- CROPPER -->\n    <div class=\"cropper\">\n        <img #image alt=\"image\" [src]=\"imageUrl\" (load)=\"imageLoaded($event)\" (error)=\"imageLoadError($event)\" />\n    </div>\n</div>\n`,\n    styles: [`:host{display:block}.cropper img{max-width:100%;max-height:100%;height:auto}.cropper-wrapper{position:relative;min-height:80px}.cropper-wrapper .loading-block{position:absolute;top:0;left:0;width:100%;height:100%}.cropper-wrapper .loading-block .spinner{width:31px;height:31px;margin:0 auto;border:2px solid rgba(97,100,193,.98);border-radius:50%;border-left-color:transparent;border-right-color:transparent;-webkit-animation:425ms linear infinite cssload-spin;position:absolute;top:calc(50% - 15px);left:calc(50% - 15px);animation:425ms linear infinite cssload-spin}@-webkit-keyframes cssload-spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cssload-spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}/*!\n * Cropper.js v1.4.1\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2018-07-15T09:54:43.167Z\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cropper-container img{display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{bottom:0;left:0;position:absolute;right:0;top:0}.cropper-canvas,.cropper-wrap-box{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:#39f solid 1px;overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:calc(100% / 3);left:0;top:calc(100% / 3);width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:calc(100% / 3);top:0;width:calc(100% / 3)}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:after,.cropper-center:before{background-color:#eee;content:' ';display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width:768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width:992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width:1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:' ';display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC)}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}`],\n    encapsulation: ViewEncapsulation.None\n})\nexport class CropperComponent implements OnInit {\n\n    @ViewChild('image') image: ElementRef;\n\n    @Input() imageUrl: any;\n    @Input() settings: ImageCropperSetting;\n    @Input() cropbox: Cropper.CropBoxData;\n    @Input() loadImageErrorText: string;\n    @Input() cropperOptions: any = {};\n\n    @Output() export = new EventEmitter<ImageCropperResult>();\n    @Output() ready = new EventEmitter();\n\n    public isLoading: boolean = true;\n    public cropper: Cropper;\n    public imageElement: HTMLImageElement;\n    public loadError: any;\n\n    constructor() { }\n\n    ngOnInit() {\n    }\n\n    /**\n     * Image loaded\n     * @param ev\n     */\n    imageLoaded(ev: Event) {\n\n        //\n        // Unset load error state\n        this.loadError = false;\n\n        //\n        // Setup image element\n        const image = ev.target as HTMLImageElement;\n        this.imageElement = image;\n\n        //\n        // Add crossOrigin?\n        console.log('this.cropperOptions', this.cropperOptions);\n        if (this.cropperOptions.checkCrossOrigin) image.crossOrigin = 'anonymous';\n\n        //\n        // Image on ready event\n        image.addEventListener('ready', () => {\n            //\n            // Emit ready\n            this.ready.emit(true);\n\n            //\n            // Unset loading state\n            this.isLoading = false;\n\n            //\n            // Validate cropbox existance\n            if (this.cropbox) {\n\n                //\n                // Set cropbox data\n                this.cropper.setCropBoxData(this.cropbox);\n            }\n        });\n\n        //\n        // Setup aspect ratio according to settings\n        let aspectRatio = NaN;\n        if (this.settings) {\n            const { width, height } = this.settings;\n            aspectRatio = width / height;\n        }\n\n        //\n        // Set crop options\n        // extend default with custom config\n        this.cropperOptions = Object.assign({\n            aspectRatio,\n            movable: false,\n            scalable: false,\n            zoomable: false,\n            viewMode: 1,\n            checkCrossOrigin: true\n        }, this.cropperOptions);\n\n        //\n        // Set cropperjs\n        this.cropper = new Cropper(image, this.cropperOptions);\n    }\n\n    /**\n     * Image load error\n     * @param event\n     */\n    imageLoadError(event: any) {\n\n        //\n        // Set load error state\n        this.loadError = true;\n\n        //\n        // Unset loading state\n        this.isLoading = false;\n    }\n\n    /**\n     * Export canvas\n     * @param base64\n     */\n    exportCanvas(base64?: any) {\n\n        //\n        // Get and set image, crop and canvas data\n        const imageData = this.cropper.getImageData();\n        const cropData = this.cropper.getCropBoxData();\n        const canvas = this.cropper.getCroppedCanvas();\n        const data = { imageData, cropData };\n\n        //\n        // Create promise to resolve canvas data\n        const promise = new Promise(resolve => {\n\n            //\n            // Validate base64\n            if (base64) {\n\n                //\n                // Resolve promise with dataUrl\n                return resolve({\n                    dataUrl: canvas.toDataURL('image/png')\n                });\n            }\n            canvas.toBlob(blob => resolve({ blob }));\n        });\n\n        //\n        // Emit export data when promise is ready\n        promise.then(res => {\n            this.export.emit(Object.assign(data, res));\n        });\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CropperComponent } from './cropper/cropper.component';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [CropperComponent],\n    exports: [CropperComponent]\n})\nexport class AngularCropperjsModule { }\n"],"names":[],"mappings":"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"}
